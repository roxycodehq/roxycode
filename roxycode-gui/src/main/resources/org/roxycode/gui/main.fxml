<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.image.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="org.roxycode.gui.MainController" 
            prefHeight="750.0" prefWidth="1100.0" styleClass="main-container"
            stylesheets="@styles.css">
    <top>
        <HBox styleClass="header-bar" alignment="CENTER_LEFT" spacing="20">

            <HBox alignment="CENTER_LEFT" spacing="15">
                <ImageView fitHeight="64" preserveRatio="true">
                    <Image url="@../../../images/roxy.png"/>
                </ImageView>
                <Label text="RoxyCode" styleClass="header-brand" />
            </HBox>
            
            <Region HBox.hgrow="ALWAYS" />
            
            <HBox alignment="CENTER" spacing="10" styleClass="status-container">
                <HBox alignment="CENTER" spacing="5" styleClass="metadata-badge, os-badge">
                     <FontIcon iconLiteral="fas-desktop" iconSize="12" styleClass="badge-icon"/>
                     <Label fx:id="osLabel" text="OS" />
                </HBox>
                <HBox alignment="CENTER" spacing="5" styleClass="metadata-badge, java-badge">
                     <FontIcon iconLiteral="fas-coffee" iconSize="12" styleClass="badge-icon"/>
                     <Label fx:id="javaLabel" text="Java" />
                </HBox>
                <HBox alignment="CENTER" spacing="5" styleClass="metadata-badge, branch-badge">
                     <FontIcon iconLiteral="fas-code-branch" iconSize="12" styleClass="badge-icon"/>
                     <Label fx:id="branchLabel" text="Branch" />
                </HBox>
                <Separator orientation="VERTICAL" />
                <Label fx:id="cacheStatusLabel" text="Cache: None" styleClass="header-status-label" />
            </HBox>
            
            <VBox alignment="CENTER_RIGHT" spacing="2">
                <Label fx:id="userLabel" text="User" styleClass="header-user-name" />
                <Label fx:id="projectLabel" text="Project" styleClass="header-project-name" />
            </VBox>
        </HBox>
    </top>
    <left>
        <VBox styleClass="sidebar" spacing="5">
            <Button fx:id="chatNavButton" text="Codebase Chat" onAction="#showChat" styleClass="nav-button, active">
                <graphic>
                    <FontIcon iconLiteral="fas-comment-dots" iconSize="18" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="historyNavButton" text="Agent History" onAction="#showHistory" styleClass="nav-button">
                <graphic>
                    <FontIcon iconLiteral="fas-history" iconSize="18" styleClass="nav-icon"/>
                </graphic>
            </Button>
            <Button fx:id="cachesNavButton" text="Caches" onAction="#showCaches" styleClass="nav-button">
                <graphic>
                    <FontIcon iconLiteral="fas-layer-group" iconSize="18" styleClass="nav-icon"/>
                </graphic>
            </Button>
            
            <Button fx:id="settingsNavButton" text="Settings" onAction="#showSettings" styleClass="nav-button">
                <graphic>
                    <FontIcon iconLiteral="fas-cog" iconSize="18" styleClass="nav-icon"/>
                </graphic>
            </Button>
            
            <Region VBox.vgrow="ALWAYS" />
        </VBox>
    </left>
    <center>
        <StackPane fx:id="contentArea" style="-fx-padding: 30;">
            <!-- Content will be loaded here -->
        </StackPane>
    </center>
</BorderPane>
